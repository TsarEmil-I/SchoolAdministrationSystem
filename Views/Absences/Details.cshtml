@model SchoolAdministrationSystem.Data.Absence

@{
    ViewData["Title"] = "Информация за отсъствие";
}

<h1 class="text-3xl font-bold text-gray-900 mb-6">Информация</h1>

<div class="max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-lg">
    <h4 class="text-lg font-medium text-gray-700 mb-4">Информация за отсъствието</h4>
    <hr class="my-4" />

    <!-- Displaying the Absence Details -->
    <dl class="space-y-6">
        <div class="grid grid-cols-2 gap-6">
            <dt class="font-medium text-gray-700">@Html.DisplayNameFor(model => model.SequenceNumber)</dt>
            <dd class="text-gray-900" id="sequenceNumber">@Html.DisplayFor(model => model.SequenceNumber)</dd>
        </div>
        <div class="mt-4 text-center">
            <button id="copyButton"
                    class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-md shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-300">
                Копирай входящ номер
            </button>
        </div>
        <div class="grid grid-cols-2 gap-6">
            <dt class="font-medium text-gray-700">@Html.DisplayNameFor(model => model.Reason)</dt>
            <dd class="text-gray-900">@Html.DisplayFor(model => model.Reason)</dd>
        </div>
        <div class="grid grid-cols-2 gap-6">
            <dt class="font-medium text-gray-700">@Html.DisplayNameFor(model => model.Start)</dt>
            <dd class="text-gray-900">@Html.DisplayFor(model => model.Start)</dd>
        </div>
        <div class="grid grid-cols-2 gap-6">
            <dt class="font-medium text-gray-700">@Html.DisplayNameFor(model => model.End)</dt>
            <dd class="text-gray-900">@Html.DisplayFor(model => model.End)</dd>
        </div>
        <div class="grid grid-cols-2 gap-6">
            <dt class="font-medium text-gray-700">@Html.DisplayNameFor(model => model.Student)</dt>
            <dd class="text-gray-900">@Html.DisplayFor(model => model.Student)</dd>
        </div>
        <div class="grid grid-cols-2 gap-6">
            <dt class="font-medium text-gray-700">@Html.DisplayNameFor(model => model.Class)</dt>
            <dd class="text-gray-900">@Html.DisplayFor(model => model.Class)</dd>
        </div>
    </dl>

    <!-- Action Buttons: Edit, Back to List, and Copy -->
    <div class="mt-6 flex justify-between">
        <a asp-action="Index" class="inline-block text-blue-600 hover:text-blue-800 font-medium">
            Назад
        </a>
        <a asp-action="Edit" asp-route-id="@Model?.Id" class="inline-block bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-400">
            Редактирай
        </a>
    </div>    
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const copyButton = document.getElementById("copyButton");
        const sequenceNumberElement = document.getElementById("sequenceNumber");

        copyButton.addEventListener("click", function () {
            const sequenceNumber = sequenceNumberElement.textContent.trim();

            navigator.clipboard.writeText(sequenceNumber)
                .then(() => {
                    alert("Входящият номер е копиран успешно!");
                })
                .catch(err => {
                    console.error("Грешка при копирането на текста:", err);
                    alert("Неуспешно копиране.");
                });
        });
    });
</script>
